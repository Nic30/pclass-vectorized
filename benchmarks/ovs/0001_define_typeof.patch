diff --git a/include/openvswitch/compiler.h b/include/openvswitch/compiler.h
index 5289a70f6..3ef9cee33 100644
--- a/include/openvswitch/compiler.h
+++ b/include/openvswitch/compiler.h
@@ -27,6 +27,10 @@
   #define __has_extension(x) 0
 #endif
 
+#ifndef typeof
+#define typeof(x) __typeof__(x)
+#endif
+
 /* To make OVS_NO_RETURN portable across gcc/clang and MSVC, it should be
  * added at the beginning of the function declaration. */
 #if __GNUC__ && !__CHECKER__

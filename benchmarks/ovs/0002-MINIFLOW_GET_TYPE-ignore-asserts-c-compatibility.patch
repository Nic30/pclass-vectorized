From 6a2189778a57ab3d9a2e887a00987e15049a890d Mon Sep 17 00:00:00 2001
From: Nic30 <nic30@seznam.cz>
Date: Thu, 22 Aug 2019 17:37:55 +0200
Subject: [PATCH 2/3] MINIFLOW_GET_TYPE ignore asserts (c++ compatibility)

---
 lib/flow.h | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

diff --git a/lib/flow.h b/lib/flow.h
index e5af744c7..196e160d1 100644
--- a/lib/flow.h
+++ b/lib/flow.h
@@ -687,10 +687,11 @@ miniflow_get__(const struct miniflow *mf, size_t idx)
 /* Get the value of the struct flow 'FIELD' as up to 8 byte wide integer type
  * 'TYPE' from miniflow 'MF'. */
 #define MINIFLOW_GET_TYPE(MF, TYPE, FIELD)                              \
-    (BUILD_ASSERT(sizeof(TYPE) == sizeof(((struct flow *)0)->FIELD)),   \
-     BUILD_ASSERT_GCCONLY(__builtin_types_compatible_p(TYPE, typeof(((struct flow *)0)->FIELD))), \
-     MINIFLOW_GET_TYPE__(MF, TYPE, FIELD))
+     MINIFLOW_GET_TYPE__(MF, TYPE, FIELD)
 
+//     (BUILD_ASSERT(sizeof(TYPE) == sizeof(((struct flow *)0)->FIELD)),
+//      BUILD_ASSERT_GCCONLY(__builtin_types_compatible_p(TYPE, typeof( ((struct flow *)0)->FIELD ) )),
+// )
 /* Like MINIFLOW_GET_TYPE, but without checking that TYPE is the correct width
  * for FIELD.  (This is useful for deliberately reading adjacent fields in one
  * go.)  */
-- 
2.20.1

